---
layout: post
title: SSOC 2차 기능명세
author: 조상준
categories: SSOC
banner:
  image: ../assets/images/banners/basic.png
  height: "100vh"
  min_height: "38vh"
  heading_style: "font-size: 3.25em; font-weight: bold;"
  subheading_style: "color: gold"
tags: ssoc
top: 1
sidebar: []
---

### 참고사항

**아래 명세서의 API 접근권한의 분류옵션, 즉,** 서비스 사용자는 총 6종류로 분류합니다.

- 전체 회원 (ALL), 관리자 (Admin), 지원자 (Applicant), 미소속 관리자, 동아리 운영진(Manager), 동아리원(Member)
- 이에 대한 정확한 계층도는 아래 사진과 같습니다.
    - 서비스 사용자 계층도
        
        ![스크린샷 2025-06-28 오후 4.36.29.png](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2025-06-28_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_4.36.29.png)
        
- 따라서, Admin의 경우, 미소속 관리자, 동아리 운영진, 동아리원을 포함하는 개념입니다.

### 0. 동아리내 검증이 필요한 API인 경우


- 기존(v1)
    
    GET 요청: parameter에 clubId 필수
    
    POST 요청: request body에 cludSecuredDto: { clubId, adminId } 필수 
    

현재(v2)

아래 기능 명세표의 “API 접근권한”의 Manager/Member 권한은 “로그인한 사용자의 접속 동아리 내부 권한” 검증이 요구됩니다.

해당 검증 수행은 로그인 사용자 ID와 현재 접속중인 동아리 ID를 받아, 권한 테이블을 조회하는 방식으로 인증이 이뤄집니다. 

따라서 Request Header에 아래 커스텀 헤더를 추가해야 합니다.

(사용자 ID(Admin Id) 없이, Club ID만 헤더값으로 받는 이유는 현재 로그인한 사용자의 ID는 AT인증이후 시큐리티 컨텍스트에 접근하여 가져올 수 있기 때문입니다.)

```json

{ X-CLUB-ID : 현재 요청을 보낸 상황에서 사용자가 접속해 있는 clubId }
```

(Access Token이 Authorization : Bearer {access-token}으로 보내주는 것과 동일하게, 아래 포멧으로 헤더에 추가 바랍니다.)

[1. 로그인/회원가입 (Security 권한 - 1차 권한)](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/1%20%E1%84%85%E1%85%A9%E1%84%80%E1%85%B3%E1%84%8B%E1%85%B5%E1%86%AB%20%E1%84%92%E1%85%AC%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%80%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%B8%20(Security%20%E1%84%80%E1%85%AF%E1%86%AB%E1%84%92%E1%85%A1%E1%86%AB%20-%201%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%AF%E1%86%AB%E1%84%92%E1%85%A1%E1%86%AB%20220976a7f2238018a9cad46647323ec9.csv)

- **로그인/회원가입 전체 프로세스**
    
    ![image.png](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/image.png)
    
- AT, RT 명세서
    
    ![image.png](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/image%201.png)
    

[2. 동아리 내부 권한 검증 (Role 권한 - 2차 권한) - 해당 기능은 독립적인 API가 아닌, 검증이 필요한 API에 앞서 기본적으로 수행되는 로직입니다.(AOP로 처리)](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/2%20%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8B%E1%85%A1%E1%84%85%E1%85%B5%20%E1%84%82%E1%85%A2%E1%84%87%E1%85%AE%20%E1%84%80%E1%85%AF%E1%86%AB%E1%84%92%E1%85%A1%E1%86%AB%20%E1%84%80%E1%85%A5%E1%86%B7%E1%84%8C%E1%85%B3%E1%86%BC%20(Role%20%E1%84%80%E1%85%AF%E1%86%AB%E1%84%92%E1%85%A1%E1%86%AB%20-%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%AF%20220976a7f223809eb7d9c00abf19b44d.csv)

[3. 동아리(Club)](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/3%20%E1%84%83%E1%85%A9%E1%86%BC%E1%84%8B%E1%85%A1%E1%84%85%E1%85%B5(Club)%20220976a7f223802a8dc6d83ae78ba8b1.csv)

[4. 모집공고(Recuritment)](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/4%20%E1%84%86%E1%85%A9%E1%84%8C%E1%85%B5%E1%86%B8%E1%84%80%E1%85%A9%E1%86%BC%E1%84%80%E1%85%A9(Recuritment)%20220976a7f2238008a466ea5b0502f8dc.csv)

[5. 이메일(Email)](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/5%20%E1%84%8B%E1%85%B5%E1%84%86%E1%85%A6%E1%84%8B%E1%85%B5%E1%86%AF(Email)%20222976a7f223809398dcf87c3a7c64a9.csv)

[6. 지원서(Application) ](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/6%20%E1%84%8C%E1%85%B5%E1%84%8B%E1%85%AF%E1%86%AB%E1%84%89%E1%85%A5(Application)%20223976a7f223805c9071edede52f9e42.csv)

### 6-1. 지원서(Application) 참고사항

---

Application 패키지 내부에 사전질문을 포함한다.

### 7. 평가 기능 구현에 앞서..

아래 기능들은 표의 “API 접근권한”에 쓰여있듯이 Manager/Member 권한이 요구됩니다.

따라서 Request Header에 아래 커스텀 헤더를 추가해야 합니다.

(Access Token이 Authorization : Bearer {access-token}으로 보내주는 것과 동일하게, 아래 포멧으로 헤더에 추가 바랍니다.)

```json

{ X-CLUB-ID : 현재 요청을 보낸 상황에서 사용자가 접속해 있는 clubId }
```

[7. 평가(evaluation)](RYC%202%E1%84%8E%E1%85%A1%20%E1%84%80%E1%85%B5%E1%84%82%E1%85%B3%E1%86%BC%E1%84%86%E1%85%A7%E1%86%BC%E1%84%89%E1%85%A6%20220976a7f22380199c7fc9953c221f5b/7%20%E1%84%91%E1%85%A7%E1%86%BC%E1%84%80%E1%85%A1(evaluation)%2022e976a7f2238044afaee7a287a90964.csv)

## 비즈니스 외

### *.기타 기능들

---

- 이미지 저장 및 처리방식(Thumbnail, Original) → 프론트에서 하기로 결정한건지? 준희형이 물어봤었는데 어떻게 처리 되었는지 궁금
- 모든 도메인에서 Update 로직에 대한 통일성이 필요할 듯
- 관리자API의 경우 매 요청에 clubId와 adminId를 담아 보내주어야 함(현재: `clubRoleSecuredDto`로 구현). 다만 현재 스웨거에 표기가 되어 있지 않고 누락 가능성이 있어, 별도로 서버에서 값을 뜯어올 수 있는지 고민이 필요함. 지금 생각으로는 clubId의 경우는 클라이언트 측에서 받아야 할 것 같고, adminId의 경우 시큐리티에서 뜯어올 수 있을 것 같은데 수정 필요.
